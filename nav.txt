const express = require('express');
const axios = require('axios');
const cors = require("cors");

const app = express();
const port = 3007; // Choose any port you prefer
app.use(cors());

// Endpoint to handle requests
app.get('/', (req, res) => {
  // Set up the request parameters
  const params = {
    api_key: "DA7E5DDB4FB04CFDAC43DA4E2475784F",
    ebay_domain: "ebay.com",
    search_term: "human hair",
    type: "search"
  };

  // Make the http GET request to Countdown API
  axios.get('https://api.countdownapi.com/request', { params })
    .then(response => {
      // Send the JSON response from Countdown API to the client
      res.json(response.data);
      console.log(response.data)
    })
    .catch(error => {
      // Send the error as JSON response to the client
      res.status(500).json({ error: error.message });
    });
});

// Start the server
app.listen(port, () => {
  console.log(`Server is running on http://localhost:${port}`);
});
